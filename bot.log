2026-02-07 12:03:08,262 - asyncio - DEBUG - Using proactor: IocpProactor
2026-02-07 12:03:08,566 - __main__ - INFO - Starting polling...
2026-02-07 12:03:08,814 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-02-07 12:03:08,814 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:03:08,814 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-02-07 12:03:08,814 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:03:08,814 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-02-07 12:03:08,824 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:03:08,825 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-07 12:03:08,831 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:03:08,831 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:03:08,837 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:03:08,842 - sqlalchemy.engine.Engine - INFO - [cached since 0.01072s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:03:08,842 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:03:08,844 - sqlalchemy.engine.Engine - INFO - [cached since 0.0128s ago] ('orders', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:03:08,844 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:03:08,844 - sqlalchemy.engine.Engine - INFO - [cached since 0.01498s ago] ('order_status_history', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:03:08,847 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:03:08,848 - sqlalchemy.engine.Engine - INFO - [cached since 0.0169s ago] ('pricing', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:03:08,850 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:03:08,851 - sqlalchemy.engine.Engine - INFO - [cached since 0.01963s ago] ('daily_stats', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:03:08,851 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE order_status_history (
	id SERIAL NOT NULL, 
	order_id UUID NOT NULL, 
	old_status VARCHAR(20), 
	new_status VARCHAR(20) NOT NULL, 
	changed_by BIGINT, 
	changed_by_type VARCHAR(10) CHECK (changed_by_type IN ('user', 'admin', 'system')), 
	notes TEXT, 
	changed_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (order_id) ON DELETE CASCADE
)


2026-02-07 12:03:08,851 - sqlalchemy.engine.Engine - INFO - [no key 0.00083s] ()
2026-02-07 12:03:08,879 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-07 12:03:08,931 - __main__ - INFO - Bot stopped
2026-02-07 12:05:38,489 - asyncio - DEBUG - Using proactor: IocpProactor
2026-02-07 12:05:38,721 - __main__ - INFO - Starting polling...
2026-02-07 12:05:38,793 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-02-07 12:05:38,793 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:05:38,802 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-02-07 12:05:38,802 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:05:38,802 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-02-07 12:05:38,802 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:05:38,802 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-07 12:05:38,810 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:05:38,810 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:05:38,818 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:05:38,818 - sqlalchemy.engine.Engine - INFO - [cached since 0.009457s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:05:38,818 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:05:38,818 - sqlalchemy.engine.Engine - INFO - [cached since 0.01136s ago] ('orders', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:05:38,818 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:05:38,822 - sqlalchemy.engine.Engine - INFO - [cached since 0.01276s ago] ('order_status_history', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:05:38,823 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:05:38,823 - sqlalchemy.engine.Engine - INFO - [cached since 0.01485s ago] ('pricing', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:05:38,823 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:05:38,826 - sqlalchemy.engine.Engine - INFO - [cached since 0.01651s ago] ('daily_stats', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:05:38,826 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE order_status_history (
	id SERIAL NOT NULL, 
	order_id UUID NOT NULL, 
	old_status VARCHAR(20), 
	new_status VARCHAR(20) NOT NULL, 
	changed_by BIGINT, 
	changed_by_type VARCHAR(10) CHECK (changed_by_type IN ('user', 'admin', 'system')), 
	notes TEXT, 
	changed_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (order_id) ON DELETE CASCADE
)


2026-02-07 12:05:38,826 - sqlalchemy.engine.Engine - INFO - [no key 0.00065s] ()
2026-02-07 12:05:38,844 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-07 12:05:38,876 - __main__ - INFO - Bot stopped
2026-02-07 12:06:17,286 - asyncio - DEBUG - Using proactor: IocpProactor
2026-02-07 12:06:17,506 - __main__ - INFO - Starting polling...
2026-02-07 12:06:17,710 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-02-07 12:06:17,717 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:06:17,719 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-02-07 12:06:17,719 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:06:17,722 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-02-07 12:06:17,723 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:06:17,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-07 12:06:17,730 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:06:17,730 - sqlalchemy.engine.Engine - INFO - [generated in 0.00075s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:06:17,739 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:06:17,739 - sqlalchemy.engine.Engine - INFO - [cached since 0.0125s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:06:17,743 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:06:17,743 - sqlalchemy.engine.Engine - INFO - [cached since 0.01469s ago] ('orders', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:06:17,743 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:06:17,743 - sqlalchemy.engine.Engine - INFO - [cached since 0.01713s ago] ('order_status_history', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:06:17,747 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:06:17,747 - sqlalchemy.engine.Engine - INFO - [cached since 0.01943s ago] ('pricing', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:06:17,750 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:06:17,751 - sqlalchemy.engine.Engine - INFO - [cached since 0.02173s ago] ('daily_stats', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:06:17,751 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE order_status_history (
	id SERIAL NOT NULL, 
	order_id UUID NOT NULL, 
	old_status VARCHAR(20), 
	new_status VARCHAR(20) NOT NULL, 
	changed_by BIGINT, 
	changed_by_type VARCHAR(10) CHECK (changed_by_type IN ('user', 'admin', 'system')), 
	notes TEXT, 
	changed_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (order_id) ON DELETE CASCADE
)


2026-02-07 12:06:17,755 - sqlalchemy.engine.Engine - INFO - [no key 0.00094s] ()
2026-02-07 12:06:17,781 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-07 12:06:17,820 - __main__ - INFO - Bot stopped
2026-02-07 12:08:41,545 - asyncio - DEBUG - Using proactor: IocpProactor
2026-02-07 12:08:41,797 - __main__ - INFO - Starting polling...
2026-02-07 12:08:41,880 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
2026-02-07 12:08:41,881 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:08:41,883 - sqlalchemy.engine.Engine - INFO - select current_schema()
2026-02-07 12:08:41,884 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:08:41,886 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
2026-02-07 12:08:41,886 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-02-07 12:08:41,888 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-02-07 12:08:41,891 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:08:41,892 - sqlalchemy.engine.Engine - INFO - [generated in 0.00076s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:08:41,900 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:08:41,901 - sqlalchemy.engine.Engine - INFO - [cached since 0.009703s ago] ('admins', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:08:41,902 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:08:41,903 - sqlalchemy.engine.Engine - INFO - [cached since 0.01165s ago] ('orders', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:08:41,904 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:08:41,905 - sqlalchemy.engine.Engine - INFO - [cached since 0.01354s ago] ('order_status_history', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:08:41,906 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:08:41,907 - sqlalchemy.engine.Engine - INFO - [cached since 0.01533s ago] ('pricing', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:08:41,908 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2026-02-07 12:08:41,908 - sqlalchemy.engine.Engine - INFO - [cached since 0.01709s ago] ('daily_stats', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2026-02-07 12:08:41,910 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE order_status_history (
	id SERIAL NOT NULL, 
	order_id UUID NOT NULL, 
	old_status VARCHAR(20), 
	new_status VARCHAR(20) NOT NULL, 
	changed_by BIGINT, 
	changed_by_type VARCHAR(10) CHECK (changed_by_type IN ('user', 'admin', 'system')), 
	notes TEXT, 
	changed_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(order_id) REFERENCES orders (order_id) ON DELETE CASCADE
)


2026-02-07 12:08:41,911 - sqlalchemy.engine.Engine - INFO - [no key 0.00075s] ()
2026-02-07 12:08:41,945 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-02-07 12:08:41,976 - __main__ - INFO - Bot stopped
